import 'package:flutter/widgets.dart';
import '../../component_example_models.dart';
import 'popover_example_1.dart';

const ComponentExample popoverExample1 = ComponentExample(
  title: "Popover Example",
  builder: _buildPopoverExample1,
  code: "import 'package:flutter/foundation.dart';\nimport 'package:docs/ui/shadcn/shadcn_ui.dart';\n\n// Shows how to open a contextual popover anchored to a button, with a custom\n// overlay barrier and a simple form inside. The popover closes via\n// closeOverlay(context) or when the user taps outside the barrier.\n\nclass PopoverExample1 extends StatelessWidget {\n  const PopoverExample1({super.key});\n\n  @override\n  Widget build(BuildContext context) {\n    final theme = Theme.of(context);\n    return PrimaryButton(\n      onPressed: () {\n        showPopover(\n          context: context,\n          // Position the popover above the button, shifted by 8px.\n          alignment: Alignment.topCenter,\n          offset: const Offset(0, 8),\n          // Unless you have full opacity surface,\n          // you should explicitly set the overlay barrier.\n          overlayBarrier: OverlayBarrier(\n            borderRadius: theme.borderRadiusLg,\n          ),\n          builder: (context) {\n            return ModalContainer(\n              child: SizedBox(\n                width: 300,\n                child: Column(\n                  mainAxisSize: MainAxisSize.min,\n                  crossAxisAlignment: CrossAxisAlignment.stretch,\n                  children: [\n                    const Text('Dimensions').large().medium(),\n                    const Text('Set the dimensions for the layer.').muted(),\n                    Form(\n                      controller: FormController(),\n                      // Compact grid layout for label/field rows.\n                      child: const FormTableLayout(\n                        rows: [\n                          FormField<double>(\n                            key: FormKey(#width),\n                            label: Text('Width'),\n                            child: TextField(\n                              initialValue: '100%',\n                            ),\n                          ),\n                          FormField<double>(\n                            key: FormKey(#maxWidth),\n                            label: Text('Max. Width'),\n                            child: TextField(\n                              initialValue: '300px',\n                            ),\n                          ),\n                          FormField<double>(\n                            key: FormKey(#height),\n                            label: Text('Height'),\n                            child: TextField(\n                              initialValue: '25px',\n                            ),\n                          ),\n                          FormField<double>(\n                            key: FormKey(#maxHeight),\n                            label: Text('Max. Height'),\n                            child: TextField(\n                              initialValue: 'none',\n                            ),\n                          ),\n                        ],\n                        spacing: 8,\n                      ),\n                    ).withPadding(vertical: 16),\n                    PrimaryButton(\n                      onPressed: () {\n                        // Close the popover and resolve the returned future.\n                        closeOverlay(context);\n                      },\n                      child: const Text('Submit'),\n                    ),\n                  ],\n                ),\n              ),\n            );\n          },\n        ).future.then((_) {\n          // Optional completion hook after the popover is dismissed.\n          if (kDebugMode) {\n            print('Popover closed');\n          }\n        });\n      },\n      child: const Text('Open popover'),\n    );\n  }\n}\n",
);

Widget _buildPopoverExample1(BuildContext context) {
  return const PopoverExample1();
}

const List<ComponentExample> popoverExamples = [
  popoverExample1,
];
