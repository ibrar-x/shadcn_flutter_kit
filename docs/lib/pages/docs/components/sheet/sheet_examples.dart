import 'package:flutter/widgets.dart';
import '../../component_example_models.dart';
import 'sheet_example_1.dart';

const ComponentExample sheetExample1 = ComponentExample(
  title: "Example",
  builder: _buildSheetExample1,
  code: "import 'package:docs/ui/shadcn/shadcn_ui.dart';\n\nclass SheetExample1 extends StatefulWidget {\n  const SheetExample1({super.key});\n\n  @override\n  State<SheetExample1> createState() => _SheetExample1State();\n}\n\nclass _SheetExample1State extends State<SheetExample1> {\n  // A form controller to read values and validation state inside the sheet.\n  final FormController controller = FormController();\n\n  void saveProfile() {\n    showDialog(\n      context: context,\n      builder: (context) {\n        return AlertDialog(\n          title: const Text('Profile updated'),\n          // For demo, show raw form values.\n          content: Text('Content: \${controller.values}'),\n          actions: [\n            PrimaryButton(\n              onPressed: () {\n                Navigator.pop(context);\n              },\n              child: const Text('Close'),\n            ),\n          ],\n        );\n      },\n    );\n  }\n\n  Widget buildSheet(BuildContext context) {\n    return Container(\n      padding: const EdgeInsets.all(24),\n      constraints: const BoxConstraints(maxWidth: 400),\n      child: Form(\n        controller: controller,\n        child: Column(\n          mainAxisSize: MainAxisSize.min,\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Row(\n              mainAxisSize: MainAxisSize.min,\n              children: [\n                Expanded(\n                  child: const Text('Edit profile').large().medium(),\n                ),\n                TextButton(\n                  density: ButtonDensity.icon,\n                  child: const Icon(Icons.close),\n                  onPressed: () {\n                    // Close the sheet without saving.\n                    closeSheet(context);\n                  },\n                ),\n              ],\n            ),\n            const Gap(8),\n            const Text(\n                    'Make changes to your profile here. Click save when you\\'re done.')\n                .muted(),\n            const Gap(16),\n            FormTableLayout(\n              rows: [\n                FormField<String>(\n                  key: const FormKey(#name),\n                  label: const Text('Name'),\n                  validator:\n                      const NotEmptyValidator() & const LengthValidator(min: 4),\n                  child: const TextField(\n                    initialValue: 'Thito Yalasatria Sunarya',\n                    placeholder: Text('Your fullname'),\n                  ),\n                ),\n                FormField<String>(\n                  key: const FormKey(#username),\n                  label: const Text('Username'),\n                  validator:\n                      const NotEmptyValidator() & const LengthValidator(min: 4),\n                  child: const TextField(\n                    initialValue: '@mibrar',\n                    placeholder: Text('Your username'),\n                  ),\n                ),\n              ],\n            ),\n            const Gap(16),\n            Align(\n              alignment: AlignmentDirectional.centerEnd,\n              child: FormErrorBuilder(\n                builder: (context, errors, child) {\n                  return PrimaryButton(\n                    // Disable save while there are validation errors.\n                    onPressed: errors.isNotEmpty\n                        ? null\n                        : () {\n                            // Attempt to submit the form; close the sheet when successful\n                            // and show a confirmation dialog.\n                            context.submitForm().then(\n                              (value) {\n                                if (value.errors.isEmpty) {\n                                  closeSheet(context).then(\n                                    (value) {\n                                      saveProfile();\n                                    },\n                                  );\n                                }\n                              },\n                            );\n                          },\n                    child: const Text('Save changes'),\n                  );\n                },\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return PrimaryButton(\n      onPressed: () {\n        openSheet(\n          context: context,\n          builder: (context) {\n            // Build the sheet content; keep it small and focused on the form.\n            return buildSheet(context);\n          },\n          // Slide in from the end (right on LTR).\n          position: OverlayPosition.end,\n        );\n      },\n      child: const Text('Open Sheet'),\n    );\n  }\n}\n",
);

Widget _buildSheetExample1(BuildContext context) {
  return const SheetExample1();
}

const List<ComponentExample> sheetExamples = [
  sheetExample1,
];